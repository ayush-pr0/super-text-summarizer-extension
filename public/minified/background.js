const restricted_url_list=["http://localhost","https://localhost","http://127.0.0.1","https://www.google.com/","https://yandex.com/","https://web.whatsapp.com/","https://www.bing.com/","https://www.yahoo.com/","https://www.dzen.ru/","https://www.duckduckgo.com/","https://www.ask.com/","https://www.aol.com/","https://www.archive.com/",];chrome.tabs.onActivated.addListener(async function({tabId:t}){await chrome.storage.local.set({currentTabId:t})}),chrome.tabs.onUpdated.addListener(async(t,a,s)=>{if("complete"==a.status&&s.active&&s.url){let e={pageData:"",status:"unknown",error:"Oop's..!! Unknown page found."};restricted_url_list.find(t=>s.url.includes(t))?e={pageData:"",status:"failure",error:"Oop's..!! Restricted page found."}:(s.url.includes("http://")||s.url.includes("https://"))&&(e=await chrome.tabs.sendMessage(t,{type:"GET_DATA"})),await chrome.storage.local.set({dataFetchTabId:t}),await chrome.storage.local.set({tabURL:"success"==e.status?s.url:""}),await chrome.storage.local.set({pageData:e.pageData}),await chrome.storage.local.set({error:e.error})}});